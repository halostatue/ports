# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0
PortGroup           cargo 1.0

github.setup        dtolnay faketty 1.0.20
github.tarball_from archive
revision            0
cargo.update        yes

homepage            https://github.com/dtolnay/faketty

description         Wrapper to exec a command in a pty, even if redirecting the output

long_description    {*}{
    Wrapper to exec a command in a pty, even if redirecting the output
}

categories          sysutils
installs_libs       no
license             Apache-2
maintainers         {macports.halostatue.ca:austin @halostatue} \
                    openmaintainer

checksums           ${distname}${extract.suffix} \
                    rmd160  460e68d60a00de3802f18a64cf19d7dc792eeae4 \
                    sha256  40a4d1cfa3f265f94895cb1430e9100df43ba0b04c551349cac2973e033a7775 \
                    size    8750

destroot {
    xinstall -m 0755 ${worksrcpath}/target/[cargo.rust_platform]/release/faketty \
        ${destroot}${prefix}/bin/

    # TODO: Check if faketty supports shell completions
    # Common patterns: 'faketty completion', 'faketty --completion', 'faketty generate-completion'
    #
    # set bash_completions_dir ${destroot}${prefix}/share/bash-completion/completions
    # set fish_completions_dir ${destroot}${prefix}/share/fish/vendor_completions.d
    # set zsh_completions_dir ${destroot}${prefix}/share/zsh/site-functions
    # xinstall -d ${bash_completions_dir} ${fish_completions_dir} ${zsh_completions_dir}
    #
    # system "${worksrcpath}/target/release/faketty completion bash > ${bash_completions_dir}/faketty"
    # system "${worksrcpath}/target/release/faketty completion fish > ${fish_completions_dir}/faketty.fish"
    # system "${worksrcpath}/target/release/faketty completion zsh > ${zsh_completions_dir}/_faketty"
}

cargo.crates \
    anstream                 0.6.21  43d5b281e737544384e969a5ccad3f1cdd24b48086a0fc1b2a5262a26b8f4f4a \
    anstyle                  1.0.13  5192cca8006f1fd4f7237516f40fa183bb07f8fbdfedaa0036de5ea9b0b45e78 \
    anstyle-parse             0.2.7  4e7644824f0aa2c7b9384579234ef10eb7efb6a0deb83f9630a49594dd9c15c2 \
    anstyle-query             1.1.5  40c48f72fd53cd289104fc64099abca73db4166ad86ea0b4341abe65af83dadc \
    anstyle-wincon           3.0.11  291e6a250ff86cd4a820112fb8898808a366d8f9f58ce16d1f538353ad55747d \
    bitflags                 2.10.0  812e12b5285cc515a9c72a5c1d3b6d46a19dac5acfef5265968c166106e31dd3 \
    cfg-if                    1.0.4  9330f8b2ff13f34540b44e946ef35111825727b38d33286ef986142615121801 \
    cfg_aliases               0.2.1  613afe47fcd5fac7ccf1db93babcb082c5994d996f20b8b159f2ad1658eb5724 \
    clap                     4.5.54  c6e6ff9dcd79cff5cd969a17a545d79e84ab086e444102a591e288a8aa3ce394 \
    clap_builder             4.5.54  fa42cf4d2b7a41bc8f663a7cab4031ebafa1bf3875705bfaf8466dc60ab52c00 \
    clap_derive              4.5.49  2a0b5487afeab2deb2ff4e03a807ad1a03ac532ff5a2cee5d86884440c7f7671 \
    clap_lex                  0.7.7  c3e64b0cc0439b12df2fa678eae89a1c56a529fd067a9115f7827f1fffd22b32 \
    colorchoice               1.0.4  b05b61dc5112cbb17e4b6cd61790d9845d13888356391624cbe7e41efeac1e75 \
    heck                      0.5.0  2304e00983f87ffb38b55b444b5e3b60a884b5d30c0fca7d82fe33449bbe55ea \
    is_terminal_polyfill     1.70.2  a6cb138bb79a146c1bd460005623e142ef0181e3d0219cb493e02f7d08a35695 \
    libc                    0.2.180  bcc35a38544a891a5f7c865aca548a982ccb3b8650a5b06d0fd33a10283c56fc \
    nix                      0.31.1  225e7cfe711e0ba79a68baeddb2982723e4235247aefce1482f2f16c27865b66 \
    once_cell_polyfill       1.70.2  384b8ab6d37215f3c5301a95a4accb5d64aa607f1fcb26a11b5303878451b4fe \
    proc-macro2             1.0.106  8fd00f0bb2e90d81d1044c2b32617f68fcb9fa3bb7640c23e9c748e53fb30934 \
    quote                    1.0.43  dc74d9a594b72ae6656596548f56f667211f8a97b3d4c3d467150794690dc40a \
    scratch                   1.0.9  d68f2ec51b097e4c1a75b681a8bec621909b5e91f15bb7b840c4f2f7b01148b2 \
    strsim                   0.11.1  7da8b5736845d9f2fcb837ea5d9e2628564b3b043a70948a3f0b778838c5fb4f \
    syn                     2.0.114  d4d107df263a3013ef9b1879b0df87d706ff80f65a86ea879bd9c31f9b307c2a \
    unicode-ident            1.0.22  9312f7c4f6ff9069b165498234ce8be658059c6728633667c526e27dc2cf1df5 \
    utf8parse                 0.2.2  06abde3611657adf66d383f00b093d7faecc7fa57071cce2578660c9f1010821 \
    windows-link              0.2.1  f0805222e57f7521d6a62e36fa9163bc891acd422f971defe97d64e70d0a4fe5 \
    windows-sys              0.61.2  ae137229bcbd6cdf0f7b80a31df61766145077ddf49416a728b02cb3921ff3fc
